apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  namespace: default
  name: anthropic-backend
spec:
  ai:
    provider:
      anthropic:
        model: claude-4-5-sonnet
  policies:
    auth:
      secretRef:
        name: valid-secret
---
apiVersion: v1
kind: Secret
metadata:
  name: valid-secret
  namespace: default
data:
  Authorization: QmVhcmVyIHRlc3Q=
---
# Output
output:
- backend:
    ai:
      providerGroups:
      - providers:
        - anthropic:
            model: claude-4-5-sonnet
          name: backend
    inlinePolicies:
    - auth:
        key:
          secret: test
    key: default/anthropic-backend
    name:
      name: anthropic-backend
      namespace: default
status:
  conditions:
  - lastTransitionTime: fake
    message: Backend successfully accepted
    reason: Accepted
    status: "True"
    type: Accepted
