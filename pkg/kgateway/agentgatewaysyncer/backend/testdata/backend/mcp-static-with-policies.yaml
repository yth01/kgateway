apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  namespace: default
  name: mcp-static-with-auth
spec:
  mcp:
    targets:
    - name: auth-target
      static:
        host: mcp-server.example.com
        port: 8080
        protocol: SSE
        policies:
          auth:
            key: mcp-api-token
---
# Output
output:
- backend:
    inlinePolicies:
    - auth:
        key:
          secret: mcp-api-token
    key: default/mcp-static-with-auth/auth-target
    name:
      name: mcp-static-with-auth
      namespace: default
    static:
      host: mcp-server.example.com
      port: 8080
- backend:
    key: default/mcp-static-with-auth
    mcp:
      targets:
      - backend:
          backend: default/mcp-static-with-auth/auth-target
        name: auth-target
        protocol: SSE
    name:
      name: mcp-static-with-auth
      namespace: default
status:
  conditions:
  - lastTransitionTime: fake
    message: Backend successfully accepted
    reason: Accepted
    status: "True"
    type: Accepted
