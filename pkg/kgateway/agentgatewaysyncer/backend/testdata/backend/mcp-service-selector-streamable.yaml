apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  namespace: default
  name: mcp-service-streamable
spec:
  mcp:
    targets:
    - name: mcp-services
      selector:
        services:
          matchLabels:
            app: mcp-server
---
apiVersion: v1
kind: Service
metadata:
  name: mcp-service-http
  namespace: default
  labels:
    app: mcp-server
spec:
  ports:
  - name: mcp-http
    port: 9090
    appProtocol: kgateway.dev/mcp
---
# Output
output:
- backend:
    key: default/mcp-service-streamable
    mcp:
      targets:
      - backend:
          port: 9090
          service:
            hostname: mcp-service-http.default.svc.cluster.local
            namespace: default
        name: mcp-service-http-mcp-http
        protocol: STREAMABLE_HTTP
    name:
      name: mcp-service-streamable
      namespace: default
status:
  conditions:
  - lastTransitionTime: fake
    message: Backend successfully accepted
    reason: Accepted
    status: "True"
    type: Accepted
